{% extends "base.html" %}
{% load crispy_forms_filters %}
{% block content %}
  <div class="card nav-active border-0 mt-4">
    <div class="card-top pt-1 m-2">
      <h3 class="px-5">{{ object|yesno:"Update," }} {{ dish.name }} recipe</h3>
    </div>
    {% if dish_recipe_ingredients %}
      <div class="form-control textinput mb-3 px-3">
        <table class="table-sm ">
          <tr>
            <th>Ingredient name</th>
            <th>Amount</th>
            <th>Update ingredient</th>
            <th>Delete ingredient</th>
          </tr>
          {% for recipe in dish_recipe_ingredients %}
            <tr>
              <td>{{ recipe.ingredient.name }}</td>
              <td>{{ recipe.amount }}</td>
              <td><a class="btn btn-sm btn-outline-secondary" href="{% url 'cafe:recipe-ingredient-update' pk=recipe.id %}">Update ingredient</a></td>
              <td><a class="btn btn-sm btn-outline-danger" href="{% url 'cafe:recipe-ingredient-delete' pk=recipe.id %}">Delete ingredient</a></td>
            </tr>
          {% endfor %}
        </table>
      </div>
    {% else %}
      <div class="form-control mb-3 mx-3">
        There no ingredient in {{ dish.name }} recipe yet
      </div>
    {% endif %}
    {% if form.ingredient.field.queryset %}
      <p class="form-control textinput mb-3">{{ object|yesno:"Update,Add" }} ingredients in {{ dish.name }} recipe</p>
      {% include "includes/form.html" %}
    {% else %}
      <p class="form-control textinput mb-3">There no more ingredient in warehouse</p>
    {% endif %}
    {% if not object %}
      <a class="btn btn-primary" href="{% url 'cafe:dish-recipe-list' %}">Finish</a>
    {% endif %}
  </div>
{% endblock %}
